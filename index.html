<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no"
    />
    <title>Bola de nieve</title>

    <link
      href="https://db.onlinewebfonts.com/c/bcd0c9bdcf29c2dd630785c724469553?family=Verlag-Book"
      rel="stylesheet"
    />
    <link
      href="https://db.onlinewebfonts.com/c/ddee8efcace361d6aab1d9b0473cd521?family=Verlag-Light"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="css/style.css" />

    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ü™©</text></svg>"
    />

    <script type="module">
      // 1. Importar librer√≠as de Firebase
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-app.js";
      import {
        getAuth,
        onAuthStateChanged,
        signInAnonymously,
      } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-auth.js";

      // --- CORRECCI√ìN AQU√ç: Agregamos onSnapshot ---
      import {
        getFirestore,
        doc,
        setDoc,
        getDoc,
        collection,
        addDoc,
        onSnapshot, // <--- ¬°ESTO FALTABA!
      } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-firestore.js";

      // 2. Definir tus Credenciales (Las copi√© de tu archivo anterior)
      const firebaseConfig = {
        apiKey: "AIzaSyBAv3HFQifOmS78tRYvo8yM4Um_PX0d_sk",
        authDomain: "regalonavidad-9304b.firebaseapp.com",
        projectId: "regalonavidad-9304b",
        storageBucket: "regalonavidad-9304b.firebasestorage.app",
        messagingSenderId: "920626025677",
        appId: "1:920626025677:web:ee800a9860410818fc0584",
      };

      // 3. Exponer el SDK al navegador (window) para que los m√≥dulos js/ lo usen
      window.firebaseSDK = {
        // Variables
        firebaseConfig,

        // Funciones App / Auth
        initializeApp,
        getAuth,
        onAuthStateChanged,
        signInAnonymously,

        // Funciones Firestore
        getFirestore,
        doc,
        setDoc,
        getDoc,
        collection,
        addDoc,
        onSnapshot, // <--- ¬°A√ëADIDO AL OBJETO GLOBAL!
      };
    </script>
  </head>
  <body>
    <div class="vignette"></div>
    <div id="fade-overlay"></div>

    <div id="app-root"></div>

    <script type="module" src="js/app.js?v=3.0"></script>
  </body>
</html>
